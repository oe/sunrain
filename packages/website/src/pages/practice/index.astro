---
import { getLocale } from 'astro-i18n-aut';
import BaseLayout from '@/layouts/BaseLayout.astro';
import { type Language, getRelativeLocaleUrl } from '@sunrain/shared';
import { createSSGTranslations } from '@/i18n/utils';
import PracticePage from '@/components/practice/PracticePage';
import type { PracticeType } from '@/types/practice';

const lang = getLocale(Astro.url) as Language;
const t = createSSGTranslations(lang, 'practice');

// Mock practice data - in a real app, this would come from a CMS or API
const practices: PracticeType[] = [
  {
    id: 'mindful-breathing-basic',
    name: 'Basic Mindful Breathing',
    description: 'A simple breathing exercise to help you focus and relax. Perfect for beginners.',
    category: 'breathing',
    difficulty: 'beginner',
    defaultDuration: 5,
    minDuration: 3,
    maxDuration: 15,
    steps: [
      {
        id: 'step-1',
        title: 'Get Comfortable',
        description: 'Find a comfortable seated position',
        duration: 30,
        instruction: 'Sit comfortably with your back straight and feet flat on the floor.',
      },
      {
        id: 'step-2',
        title: 'Natural Breathing',
        description: 'Notice your natural breath',
        duration: 60,
        instruction: 'Simply notice your breath as it flows in and out naturally.',
      },
    ],
    instructions: ['Find a quiet space', 'Sit comfortably'],
    benefits: ['Reduces stress', 'Improves focus'],
    tips: ['Start with shorter sessions'],
    tags: ['breathing', 'mindfulness', 'relaxation', 'beginner'],
    targetAudience: ['beginners'],
    therapeuticBenefits: ['stress reduction'],
    language: 'en',
    customizable: {
      duration: true,
      backgroundMusic: true,
      voiceGuidance: true,
      visualCues: true,
    },
    averageRating: 4.7,
    completionRate: 0.89,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: 'body-scan-meditation',
    name: 'Progressive Body Scan',
    description: 'A guided meditation that helps you relax by systematically focusing on different parts of your body.',
    category: 'meditation',
    difficulty: 'beginner',
    defaultDuration: 15,
    minDuration: 10,
    maxDuration: 30,
    steps: [
      {
        id: 'step-1',
        title: 'Preparation',
        description: 'Get into a comfortable lying position',
        duration: 60,
        instruction: 'Lie down comfortably on your back.',
      },
      {
        id: 'step-2',
        title: 'Starting with Feet',
        description: 'Focus on your feet and toes',
        duration: 120,
        instruction: 'Bring your attention to your feet.',
      },
    ],
    instructions: ['Lie down comfortably', 'Close your eyes'],
    benefits: ['Deep relaxation', 'Better sleep'],
    tips: ['Use a blanket if cold'],
    tags: ['meditation', 'body scan', 'relaxation', 'sleep'],
    targetAudience: ['beginners'],
    therapeuticBenefits: ['stress relief', 'better sleep'],
    language: 'en',
    customizable: {
      duration: true,
      backgroundMusic: true,
      voiceGuidance: true,
      visualCues: true,
    },
    averageRating: 4.5,
    completionRate: 0.82,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: 'loving-kindness-meditation',
    name: 'Loving-Kindness Meditation',
    description: 'A heart-opening practice that cultivates compassion and love for yourself and others.',
    category: 'meditation',
    difficulty: 'intermediate',
    defaultDuration: 20,
    minDuration: 15,
    maxDuration: 45,
    steps: [
      {
        id: 'step-1',
        title: 'Centering',
        description: 'Center yourself with breath',
        duration: 120,
        instruction: 'Sit comfortably and take a few deep breaths.',
      },
      {
        id: 'step-2',
        title: 'Self-Compassion',
        description: 'Send loving-kindness to yourself',
        duration: 300,
        instruction: 'Repeat silently: "May I be happy. May I be healthy."',
      },
    ],
    instructions: ['Sit comfortably', 'Place hand on heart'],
    benefits: ['Increases self-compassion', 'Improves relationships'],
    tips: ['Start with easier people'],
    tags: ['meditation', 'compassion', 'loving-kindness', 'heart'],
    targetAudience: ['intermediate practitioners'],
    therapeuticBenefits: ['emotional healing'],
    language: 'en',
    customizable: {
      duration: true,
      backgroundMusic: true,
      voiceGuidance: true,
      visualCues: true,
    },
    averageRating: 4.6,
    completionRate: 0.75,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
];
---

<BaseLayout
  title={t('title')}
  description={t('meta.description')}
  lang={lang}
>
  <PracticePage practices={practices} lang={lang} />
</BaseLayout>
